Overview
========
This example demonstrates how to use EtherCAT EoE based on digital_io example.

Note that the demo CAN NOT be built directly. Please see the "Prepare the Demo" section for more details.
For more information on digital_io example, please refer to '.\boards\evkmimxrt1180\ecat_examples\digital_io'



SDK version
===========
- Version: 2.16.100

Toolchain supported
===================
- GCC ARM Embedded  13.2.1
- MCUXpresso  11.10.0

Hardware requirements
=====================
- MIMXRT1180-EVK RevC
- RJ45 Network cable
- Mini/micro USB cable
- Personal Computer on which the TwinCat3 has been installed

Board settings
==============
No special settings are required.

Prepare the Demo
================
1. Generate the SSC source code
	- Download Slave Stack Code Tool(SSC Tool) from BECKHOFF official website and install it
	- Open Slave Stack Code Tool
	- Click 'File' -> 'New' -> 'Import' to import the Congfig file
		Select eoe.xml under path '.\boards\evkmimxrt1180\ecat_examples\eoe\<core>\SSC'.
	- Click 'Tool' -> 'Application' -> 'Import' to import Application information
		Select eoe_freertos.xlsx under path '.\boards\evkmimxrt1180\ecat_examples\eoe\<core>\SSC'.
	- Click 'Project' -> 'Create new Slave Files'
		'Source Folder'(default): '.\boards\evkmimxrt1180\ecat_examples\eoe\<core>\SSC\Src'.
		Click 'Start'.
	- Remove eoe_freertos.c under Src folder
	
2. Connect EtherCAT Port0 with TwinCAT3
	RJ45 interface labeled as J28 is the EtherCAT Port0 and RJ45 interface labeled as J32 is the EtherCAT Port1.

3. Connect a USB cable between the host PC and the OpenSDA USB port on the target board

4. Open a serial terminal with the following settings
	- 115200 baud rate
	- 8 data bits
 	- No parity
	- One stop bit
	- No flow control

5. Download the program to the target board

6. Either press the reset button on your board or launch the debugger in your IDE to begin running the demo

7. Update ESI file to EEPROM
	- Copy ESI file 'ECAT-EOE.xml' generated by SSC TOOL to <TwinCAT_installation_folder>/<Version>/Config/io/EtherCAT/
	- Restart TwinCAT3 IDE
	- Scan Device and Update EEPROM

8. Scan and load this device.

9. EoE configuration setting
    - Set the address of the network card used to connect to the demo board on PC side
	   ip address:   192.168.1.102
	   subnet mask:  255.255.255.0
	   gateway:      192.168.1.0
	   
	- Set the address of the demo board on TwinCAT EoE configuration page
	   ip address:   192.168.1.66
	   subnet mask:  255.255.255.0
	   gateway:      192.168.1.102
		
10. Activate configuration
    - Click 'TwinCAT' -> 'Restart TwinCAT(Config Mode)' to activate configuration

11. Test ping and http server
	- Open cmd.exe and execute "ping 192.168.1.66"
	- Make sure browser proxy disabled
	- Open browser and access "http://192.168.1.66"


Running the demo
================
When the example is running, the serial port will output:

Start the SSC EoE example...
Hardware init success...
EoE interface init success...

***********************************************************
 HTTP Server example
***********************************************************
 IPv4 Address     : 192.168.1.66
 IPv4 Subnet mask : 255.255.255.0
 IPv4 Gateway     : 192.168.1.102
 mDNS hostname    : lwip-eoe
***********************************************************

NOTE: To modify the html of http server, please refer to lwip_examples/lwip_httpsrv example.
      Eoe example User Guide path: .\docs\ecatEoE\eCAT_EoE_Example_User_Guide.pdf
